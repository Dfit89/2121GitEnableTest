<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Primary.Done">
    <head><title>[%=Heading.AnyLevel%]</title>
        <meta name="description" content="Automotive Solution:  Describes the functions of the Import State default workflow state." />
    </head>
    <body>
        <h1>Import State</h1>
        <p class="Body1">The Import state carries out the actual import of the files generated from the delta calculation service. As the generated files are in STEPXML format, the standard STEP Importer is the engine used behind the scenes to carry out the import. </p>
        <h2>Import State Common Parameters</h2>
        <p class="Body1">The Import state includes  one business action (<b>Run background process action)</b> by default, which runs the import service as a background process. All standards share a common import service (though default actions and conditions applied to the imports differ) and the parameters are described below.</p>
        <p class="Image1">
            <img src="../../../Resources/Images/QS/ImportBGPService.png">
            </img>
        </p>
        <ul>
            <li class="Bullet1"><b>QueueID:</b> Required parameter for all background process actions that specifies the queue in which the background process should run, which defaults to 'queue_Import.' Note that this parameter is specified for the action itself, not the particular service within the action, though the outcome is the same as each action runs only a single service.</li>
            <li class="Bullet1"><b>File Attachment ID:</b> Required parameter that must be populated with the name of the file to be imported. This defaults to 'delta' as that would be the correct file name if no additional states and/or processing were added to the default workflow. If an additional workflow state or service had been added that generated some other output file that the import should act on, the parameter should be updated accordingly. </li>
        </ul>
        <p class="note2" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">This value must match the value provided for the 'Output file Attachment ID' parameter within the Delta Calculation state (if no other states are added to the default workflow). If it does not match, then the process will fail at the Import state.</p>
        <ul>
            <li class="Bullet1"><b>Import action:</b> Optional parameter allowing administrators to select one or more business actions to be run as part of the import. By default, there are no actions included but customers may add any that they wish.</li>
            <li class="Bullet1"><b>Import condition:</b> Optional parameter allowing administrators to select one of more business conditions to be run as part of the import. Importers that manage applications / linkages have one default condition applied (Validate application on import). This condition prevents applications from being imported if they do not contain a vehicle / assembly and part type in STEP. Additional information on the condition can be found in the <b>Automotive Business Rule Plugins</b> section<MadCap:xref href="../../Business Rules/Automotive Business Rule Plugins.htm" class="Here" MadCap:conditions="Primary.Web"><span style="color: Blue;" class="mcFormatColor"> here</span></MadCap:xref>.</li>
        </ul>
        <p class="note1" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Any business rules selected within the import service function the same as business rules applied in a standard STEP import, meaning that they act on the objects being imported (rather than the controller entity). If conditions are used, they must render true or the data will be excluded from the import.</p>
        <p class="important1" MadCap:autonum="&lt;b&gt;Important: &lt;/b&gt;">Automotive importers do not automatically approve objects that are created by  importer. So if Objects need to be approved, then a Business Action using the following JavaScript function must be created: <em><span class="commandfont">'node.approve();'.</span></em> Additionally, that Business Action must be added to the 'Import action' parameter.</p>
        <h2>Import State Function Details</h2>
        <p>As the import service runs a background process (BGP), a corresponding BGP folder is created on the application server at /workarea/background-processarea/ImportingFlowImportService. The BGP folder contains a sub-folder whose name matches the STEP ID of the controller entity that is moving through the workflow and contains the delta calculation file that is being imported. The import service also writes a copy of each file for which import was attempted (the number of content of files will differ based on the import) and a status file which indicates success or completion of each individual import file. </p>
        <p class="Body1">For example, an AutoCare ACES import result is shown below:</p>
        <p class="Image1">
            <img src="../../../Resources/Images/QS/ImportFileAttachments.png">
            </img>
        </p>
        <p class="Image1">
            <img src="../../../Resources/Images/QS/ImportStatus.png">
            </img>
        </p>
        <h2>Import State Results</h2>
        <p class="Body1">The import can succeed, fail, or 'complete with errors' and the controller will automatically follow appropriate bgp. transitions as applicable. All transitions lead to the same Import Completed state and none contain business rules by default, though each customer can add additional handling as they see fit.  </p>
        <p class="note1" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Information on errors and/or failures will be visible in Web UI via the background process information provided for the import.</p>
    </body>
</html>